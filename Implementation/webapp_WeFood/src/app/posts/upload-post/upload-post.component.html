<div class="popup-overlay">
  <span class="close-btn" (click)="close()">&times;</span>

  <div class="recipeInfo">
    <input class="title" type="text" [(ngModel)]="post.recipe.name" placeholder="Recipe name">
  </div>

  <div class="recipeImage">
    <input class="imageUpload" type="file" (change)="onFileSelected($event)" accept="image/*">
    <img *ngIf="fileSetted()" src="{{ post.recipe.image }}" alt="Immagine ricetta">
  </div>

  <div class="popup-content">
    <input [(ngModel)]="recipe.name" name="recipe name" type="text" placeholder="Recipe name" required>
    <input [(ngModel)]="post.description" name="desc" type="text" placeholder="Description" required>
  
    <div *ngIf="recipe.ingredients.size !== 0" class="listIngredientsAdded">
      <span *ngFor="let ingredient of recipe.ingredients | keyvalue" class="ingredientsAdded">
        {{ ingredient.key }}
        <input [(ngModel)]="ingredient.value" name="quantity" type="number" required>
        <span (click)="removeIngredient(ingredient.key)" class="remove">&times;</span>
      </span>
    </div>
    <input class="newIngredient" type="text" placeholder="Add New Ingredient" name="ingredientName" [(ngModel)]="ingredientName" (click)="newIngredientIsBeingInserted()">
    <div *ngIf="showList" class="dropdownList">
      <span *ngFor="let ingredient of ingredientsRemaining | filterIngredient:ingredientName" 
          (mouseenter)="setIngredientDetailed(ingredient)"
          (mouseleave)="setIngredientDetailed(null)"
          (click)="addIngredient(ingredient.name)" 
          class="listElement">
        
          {{ ingredient.name }}

        <span *ngIf="ingredientDetailed === ingredient" class="calories">{{ ingredient.calories }}<span> kcal/100g</span></span>
      </span>
    </div>

    <div *ngIf="recipe.steps.length !== 0" class="listIngredientsAdded">
      <span *ngFor="let item of recipe.steps" class="ingredientsAdded">
        {{ item }}
        <span (click)="removeStep(stepBeingInserted)" class="remove">&times;</span>
      </span>
    </div>
    <input class="newIngredient" type="text" placeholder="Add New Steps" name="step" [(ngModel)]="stepBeingInserted" (keyup.enter)="addStep()">

  </div>
  
  <button (click)="submitPost()">SUBMIT POST</button>
</div>
  
  
